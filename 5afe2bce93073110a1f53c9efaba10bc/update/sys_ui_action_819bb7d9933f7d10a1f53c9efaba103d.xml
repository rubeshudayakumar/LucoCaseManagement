<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_ui_action">
    <sys_ui_action action="INSERT_OR_UPDATE">
        <action_name>sysverb_new</action_name>
        <active>true</active>
        <client>true</client>
        <client_script_v2><![CDATA[function onClick(g_form) {

}]]></client_script_v2>
        <comments/>
        <condition>RP.isRelatedList() &amp;&amp;((!gs.nil(parent)&amp;&amp;parent.major_case_state != 'accepted')||gs.hasRole('sn_majorissue_mgt.major_issue_manager'))&amp;&amp;current.canCreate()&amp;&amp;!RP.getListControl().isOmitNewButton();</condition>
        <form_action>false</form_action>
        <form_button>false</form_button>
        <form_button_v2>false</form_button_v2>
        <form_context_menu>false</form_context_menu>
        <form_link>false</form_link>
        <form_menu_button_v2>false</form_menu_button_v2>
        <form_style/>
        <format_for_configurable_workspace>false</format_for_configurable_workspace>
        <hint/>
        <isolate_script>true</isolate_script>
        <list_action>true</list_action>
        <list_banner_button>true</list_banner_button>
        <list_button>false</list_button>
        <list_choice>false</list_choice>
        <list_context_menu>false</list_context_menu>
        <list_link>false</list_link>
        <list_save_with_form_button>false</list_save_with_form_button>
        <list_style/>
        <messages/>
        <name>New</name>
        <onclick>createNewCase()</onclick>
        <order>100</order>
        <script><![CDATA[function createNewCase() {
    if (g_form.modified) {
        alert(new GwtMessage().getMessage('You have unsaved changes. Please save them to continue.'));
    } else {
        var params = ["sys_id=-1", "sysparm_view=default"];

        if (typeof g_list !== "undefined" && g_list !== null) {
            for (var prop in g_list.submitValues)
                if (g_list.submitValues.hasOwnProperty(prop) && !g_list.doNotSubmitParams[prop])
                    params.push(encodeURIComponent(prop) + '=' + encodeURIComponent(g_list.submitValues[prop]));
        }
        var query = '/sn_customerservice_case.do?' + params.join('&') + '&sysparm_query=';
        var subQuery = '';
        var table = g_form.getTableName();
        var sysID = g_form.getUniqueValue();
        if (table == "customer_account")
            table = "account";
        else if (table == "customer_contact")
            table = "contact";
        else if (table == "service_entitlement")
            table = "entitlement";
        else if (table == "alm_hardware" || table == "alm_asset" || table == "alm_consumable" || table == "alm_license")
            table = "asset";
        else if (table == "ast_contract")
            table = "contract";
        else if (table == "service_entitlement")
            table = "entitlement";
        else if (table.search("product_model") != -1)
            table = "product";
        else if (table == "change_request") {
            if (g_list.getRelated() === 'sn_customerservice_case.change')
                subQuery += "^" + "change=" + sysID;
            if (g_list.getRelated() === 'sn_customerservice_case.caused_by')
                subQuery += "^" + "caused_by=" + sysID;
        } else if (table == "sn_install_base_sold_product")
            table = "sold_product";
        else if (table == "customer_project")
            table = "project";
        else if (table == "customer_project_task")
            table = "project_task";
        else if (table == 'csm_household')
            table = 'household';

        if (sysID) {
            if (query.length > 0)
                subQuery += "^" + table + "=" + sysID;
            else
                subQuery += table + "=" + sysID;

            switch (table) {
                case "sn_customerservice_case":
                    subQuery += getParent();
                    break;
                case "account":
                    break;
                case "contact":
                    subQuery += getAccount();
                    break;
                case "entitlement":
                    subQuery += getAccount() + getProduct() + getAsset() + getContract();
                    break;
                case "contract":
                    subQuery += getAccount();
                    break;
                case "asset":
                    subQuery += getAccount() + getModel();
                    break;
                case "default":
                    break;
            }

        }

        if (typeof nowapi !== 'undefined')
            nowapi.g_navigation.open(query + subQuery);
        else
            window.location = (query + subQuery);
    }
}

function getParent() {
    var subQuery = '^parent=';
    if (g_list.getListName() == 'sn_customerservice_case.sn_customerservice_case.parent')
        subQuery += g_form.getUniqueValue();
    if ((g_form.getValue('major_case_state') == 'accepted') || (g_form.getValue('major_case_state') == 'proposed'))
        subQuery += "^proactive=true";
    return subQuery;
}

function getAccount() {
    var subQuery = '^account=';
    if (g_form.getValue('account'))
        subQuery += g_form.getValue('account');

    return subQuery;
}

function getProduct() {
    var subQuery = '^product=';
    if (g_form.getValue('product'))
        subQuery += g_form.getValue('product');
    return subQuery;
}

function getModel() {
    var subQuery = '^product=';
    if (g_form.getValue('model'))
        subQuery += g_form.getValue('model');
    return subQuery;
}

function getContract() {
    var subQuery = '^contract=';
    if (g_form.getValue('contract'))
        subQuery += g_form.getValue('contract');
    return subQuery;
}

function getAsset() {
    var subQuery = '^asset=';
    if (g_form.getValue('asset'))
        subQuery += g_form.getValue('asset');
    return subQuery;
}

function getEntitlement() {
    var subQuery = '^entitlement=';
    if (g_form.getValue('entitlement'))
        subQuery += g_form.getValue('entitlement');
    return subQuery;
}]]></script>
        <show_insert>true</show_insert>
        <show_multiple_update>false</show_multiple_update>
        <show_query>false</show_query>
        <show_update>true</show_update>
        <sys_class_name>sys_ui_action</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-01-17 09:46:26</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_domain_path>/</sys_domain_path>
        <sys_id>819bb7d9933f7d10a1f53c9efaba103d</sys_id>
        <sys_mod_count>1</sys_mod_count>
        <sys_name>New</sys_name>
        <sys_overrides display_value="New">eb3bcc21c3210200348dd02422d3ae85</sys_overrides>
        <sys_package display_value="Luco Case Management" source="x_1090111_luco_cas">5afe2bce93073110a1f53c9efaba10bc</sys_package>
        <sys_policy/>
        <sys_scope display_value="Luco Case Management">5afe2bce93073110a1f53c9efaba10bc</sys_scope>
        <sys_update_name>sys_ui_action_819bb7d9933f7d10a1f53c9efaba103d</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-01-17 09:47:04</sys_updated_on>
        <table>x_1090111_luco_cas_luco_case</table>
        <ui11_compatible>true</ui11_compatible>
        <ui16_compatible>true</ui16_compatible>
    </sys_ui_action>
</record_update>
